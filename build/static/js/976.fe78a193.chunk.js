"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[976],{3976:function(n,e,t){t.r(e),t.d(e,{default:function(){return en}});var r,i,a,o,s=t(2791),c=t(6871),d=t(168),l=t(1413),u=t(885),p=function(n,e){var t=(0,s.useState)(!0),r=(0,u.Z)(t,2),i=r[0],a=r[1],o=(0,s.useState)(null),c=(0,u.Z)(o,2),d=c[0],l=c[1],p=(0,s.useState)(null),f=(0,u.Z)(p,2),h=f[0],x=f[1];return(0,s.useEffect)((function(){fetch(n).then((function(n){return n.json()})).then((function(n){l(n),e(n),x(null),a(!1)})).catch((function(n){x(n),a(!1)}))}),[n]),{data:d,loading:i,error:h}},f=t(5751),h=t(284),x=t(308),m=t(8815),g=t(9778),v=t(6030),j=t(5861),b=t(7757),w=t.n(b),y=t(1007),Z=t(184),k={color:"#ffc107",cursor:"pointer"},S={color:"#000",cursor:"pointer"},N=function(n){var e=n.rating,t=n.setRating,r=n.id,i=(0,s.useRef)(e),a=(0,v.v9)(y.PR),o=(0,s.useState)({}),c=(0,u.Z)(o,2),d=c[0],f=c[1];p("/api/dashboard/check-vote/".concat(null===a||void 0===a?void 0:a._id,"/").concat(r),(function(n){console.log(n),f(n)}));return(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)("div",{children:Array(5).fill(0).map((function(n,e){return e+1})).map((function(n){return(0,Z.jsx)("span",{style:n>e.rate?S:k,onClick:function(){return function(n){if(d.success){var o=(0,l.Z)({},e);o.rate=n,o.numberOfReviews+=1,t(o),i.current=o,fetch("/api/dashboard/rate-product/".concat(r),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_id:a._id,rate:e.rate})}).then(function(){var n=(0,j.Z)(w().mark((function n(e){var r;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.json();case 2:(r=n.sent).success&&f({success:!1,message:r.message}),r.success||(f(r),t(i.current));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.log(n),f("vote Failed check your connection")}))}}(n)},onMouseEnter:function(){if(d.success){var r=(0,l.Z)({},e);r.rate=n,t(r)}},onMouseLeave:function(){return t(i.current)},children:"\u2605"},n)}))}),(0,Z.jsxs)("span",{style:{margin:"0 15px",fontSize:"0.8rem",fontWeight:"bold"},children:["( ",e.numberOfReviews," Reviews )"]}),(0,Z.jsxs)("span",{style:{margin:"0 15px",fontSize:"0.8rem"},children:[" ",d.message," "]})]})};var P,C,R=function(){var n=(0,c.UO)().id,e=(0,v.I0)(),t=(0,s.useState)(!1),r=(0,u.Z)(t,2),i=r[0],a=r[1],o=(0,s.useState)({rate:0,numberOfReviews:0}),d=(0,u.Z)(o,2),f=d[0],j=d[1],b=(0,v.v9)(m.dv),w=p("/api/dashboard/product/".concat(n),(function(e){if(a(void 0!==b.find((function(e){return e.id===n}))),console.log(e.rates),e.rates.length){var t=e.rates.reduce((function(n,e){return n+e.rating}),0),r=Math.round(t/e.rates.length);j({rate:r,numberOfReviews:e.rates.length})}})),y=w.data,k=w.loading,S=w.error,P=y;if(console.log(n,y),(0,s.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(b))}),[b]),S)return(0,Z.jsx)(x.Z,{});if(k)return(0,Z.jsx)(h.Z,{});var C=g.lW.from(P.image.data.data).toString("base64");return(0,Z.jsxs)(O,{children:[(0,Z.jsx)(I,{children:(0,Z.jsx)("img",{src:"data:".concat(P.image.contentType,";base64,").concat(C),alt:P.title})}),(0,Z.jsxs)(E,{children:[(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("h1",{children:[" ",P.title," "]}),(0,Z.jsx)("p",{className:"desc",children:P.description})]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("p",{className:"title",children:" Price "}),(0,Z.jsxs)("span",{children:[" ",(0,Z.jsxs)("strong",{children:[P.price," $"]})," "]})]}),(0,Z.jsxs)("div",{children:[" ",(0,Z.jsx)("p",{className:"title",children:" Color "}),(0,Z.jsxs)("span",{children:[" ",P.color," "]})]}),(0,Z.jsxs)("div",{children:[" ",(0,Z.jsx)("p",{className:"title",children:" catagories "}),(0,Z.jsxs)("span",{children:[" ",P.label||" "," "]})]}),(0,Z.jsxs)("div",{children:[" ",(0,Z.jsx)("p",{className:"title",children:" Rating "}),(0,Z.jsx)(N,{rating:f,id:n,setRating:j})]}),(0,Z.jsx)(A,{children:(0,Z.jsx)("button",{disabled:i,onClick:function(){console.log(P),e((0,m.IH)((0,l.Z)({},P))),a(!0)},children:i?"in Cart":"Add to Cart"})})]})]})},O=f.ZP.div(r||(r=(0,d.Z)(["\n  @media screen and (max-width: 600px) {\n    flex-direction: column;\n    align-items: center;\n\n    div {\n      width: 100%;\n      padding: 0;\n      margin: 1rem 0;\n    }\n  }\n  padding: 5rem 3rem;\n  display: flex;\n  width: 100vw;\n"]))),E=f.ZP.div(i||(i=(0,d.Z)(["\n  padding: 0 2rem;\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  & > * {\n    margin: 0 0 1rem 0;\n\n    p {\n      margin: 10px 0;\n    }\n  }\n\n  & > div > .title {\n    font-weight: bold;\n    font-size: 1.2rem;\n  }\n"]))),I=f.ZP.div(a||(a=(0,d.Z)(["\n  width: 50%;\n  padding: 0 3rem;\n  img {\n    width: 100%;\n    height: 60vh;\n  }\n"]))),A=f.ZP.div(o||(o=(0,d.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  button {\n    padding: 10px 20px;\n    cursor: pointer;\n    background: #c0770a;\n    color: white;\n    border: none;\n  }\n\n  button:hover {\n    opacity: 0.8;\n  }\n"]))),F=t(8023),z=t(2982),M={color:"#ffc107"},W={color:"#000"},_=function(n){var e=n.rating;return(0,Z.jsxs)("div",{style:{display:"flex",position:"relative",top:"-8px"},children:[(0,Z.jsx)("div",{style:{fontSize:"0.8rem"},children:(0,z.Z)(Array(5)).map((function(n,t){return(0,Z.jsx)("span",{style:t<e.rate?M:W,children:"\u2605"},t)}))}),(0,Z.jsxs)("div",{style:{fontSize:"0.8rem",marginLeft:3},children:["(",e.numberOfReviews,e.numberOfReviews>1?" reviews":" review",")"]})]})},J=f.ZP.div(P||(P=(0,d.Z)(["\n  background-color: #f00;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 5px;\n  position: absolute;\n  left: 0;\n  top: 0;\n  box-shadow: 1px 1px 16px 6px rgb(233 249 0);\n  height: 30px;\n  transform: rotate(-45deg) translate(-20%, 0);\n"]))),T=function(n){var e=n.offer;return(0,Z.jsx)(J,{children:(0,Z.jsxs)("span",{children:[e.percent,"% OFF"]})})},B=function(n){var e=n.price,t=n.offer;if(null!==t&&void 0!==t&&t.available){var r=Math.round(100*(e-e*(t.percent/100)))/100;return(0,Z.jsxs)("div",{className:"price",children:[(0,Z.jsx)("span",{className:"oldPrice",style:{margin:"0 10px",color:"gray",fontWeight:"400"},children:(0,Z.jsxs)("del",{children:[" ",e," "]})}),(0,Z.jsxs)("span",{className:"newPrice",style:{color:"green"},children:[r," AED"]})]})}return(0,Z.jsxs)("div",{className:"price",children:[e," AED"]})};var D,H,L,q,K=function(n){var e=n.image,t=n.title,r=n.price,i=n.description,a=n._id,o=n.product,d=n.rates,u=n.offer,p=g.lW.from(e.data.data,"base64").toString("base64"),f=(0,v.v9)(F.Pu),h=(0,c.s0)(),x=(0,v.I0)(),j=(0,v.v9)(m.dv),b=j.filter((function(n){return n._id===a}));return(0,s.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(j))}),[j]),(0,Z.jsxs)(U,{theme:f,children:[(null===u||void 0===u?void 0:u.available)&&(0,Z.jsx)(T,{offer:u}),(0,Z.jsx)("img",{src:"data:".concat(e.contentType,";base64,").concat(p),onClick:function(){return h("/products/".concat(a))},alt:t}),(0,Z.jsxs)("h4",{children:[" ",t.length>20?t.substr(0,20)+" ...":t," "]}),(0,Z.jsx)("p",{children:i.substr(0,50)}),(0,Z.jsx)(_,{rating:function(){var n=d.length,e=d.reduce((function(n,e){return n+e.rating}),0);return 0===n?{rate:0,numberOfReviews:0}:{rate:Math.round(e/n)||0,numberOfReviews:n}}()}),(0,Z.jsxs)("div",{className:"desc",children:[b.length?(0,Z.jsxs)("button",{className:"removeFromCartBtn",onClick:function(){x((0,m.Od)(a))},children:[(0,Z.jsx)("span",{className:"badge",children:b[0].quantity}),"X"]}):(0,Z.jsx)("button",{onClick:function(){var n=r;null!==u&&void 0!==u&&u.available&&(n=Math.round(100*(r-r*(u.percent/100)))/100),x((0,m.IH)((0,l.Z)((0,l.Z)({},o),{},{price:n})))},children:"add to cart"}),(0,Z.jsx)(B,{price:r,offer:u})]})]})},U=f.ZP.div(C||(C=(0,d.Z)(["\n  @media screen and (max-width: 600px) {\n    width: 70%;\n  }\n\n  @media screen and (max-width: 900px) and (min-width: 600px) {\n    width: 35%;\n    margin: 1rem;\n  }\n\n  position: relative;\n  background: #fff;\n  min-width: 150px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 19%;\n  margin: 3rem 2rem;\n  height: 340px;\n  box-shadow: 5px 10px 20px rgb(0 0 0 / 30%);\n  padding: 5px 0 0 0;\n  img {\n    width: 100%;\n    height: 170px;\n    cursor: pointer;\n    margin: 0 15px 5px 15px;\n  }\n\n  h4 {\n    padding: 9px 0;\n    letter-spacing: 0.5px;\n  }\n\n  p {\n    min-width: 250px;\n    padding: 0 20px;\n    margin: 0 0 0.1rem 0;\n    font-size: 0.7rem;\n    font-family: Roboto, serif;\n    text-align: center;\n    flex: 1;\n  }\n\n  .desc {\n    width: 100%;\n    display: flex;\n    flex-direction: column-reverse;\n    transition: 0.25s;\n    word-wrap: break-word;\n    position: relative;\n    bottom: 0px;\n    text-align: center;\n    min-height: 50px;\n\n    .removeFromCartBtn {\n      padding: 0 5px 0 0;\n      font-weight: bold;\n      background: ",";\n      color: ",";\n      border: solid 1px ",";\n      height: 50px;\n      .badge {\n        background: #fff;\n        color: black;\n        padding: 2px 7px;\n        margin: 1px 10px 1px 1px;\n        border-radius: 50%;\n        cursor: pointer;\n        transition: 0.25s;\n      }\n\n      &:hover {\n        .badge {\n          background: white;\n        }\n      }\n    }\n  }\n\n  .desc > button {\n    background: ",";\n    padding: 10px 0;\n    border: solid 1px ",";\n    cursor: pointer;\n    transition: 0.25s;\n    color: #fff;\n    font-weight: bold;\n    margin-top: 0.5rem;\n\n    &:hover {\n      transform: scale(1.05);\n      background: ",";\n      border-color: ",";\n      color: white;\n    }\n  }\n\n  .desc > span {\n    font-weight: 900;\n  }\n"])),(function(n){return n.theme.action}),(function(n){return n.theme.primary}),(function(n){return n.theme.action}),(function(n){return n.theme.action}),(function(n){return n.theme.action}),(function(n){return n.theme.action}),(function(n){return n.theme.action})),X=t(8254),$=function(n){var e=n.selectedCategory,t=n.setCategory,r=(0,v.v9)(F.Pu),i=(0,s.useState)([]),a=(0,u.Z)(i,2),o=a[0],c=a[1],d=s.useRef(),l=function(n,r){t(r),console.log(e)};return(0,s.useEffect)((function(){function n(){return(n=(0,j.Z)(w().mark((function n(){var e,t,r;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("/api/settings/");case 3:return e=n.sent,n.next=6,e.json();case 6:return t=n.sent,n.next=9,t[0];case 9:r=n.sent,c(r.catagories),console.log(r.catagories),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,14]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),(0,Z.jsxs)(G,{className:"no-scroll",theme:r,ref:d,children:[(0,Z.jsx)(Q,{className:"\u0627\u0644\u0643\u0644"===e?"selected":"",theme:r,onClick:function(n){return l(0,"\u0627\u0644\u0643\u0644")},children:"\u0627\u0644\u0643\u0644"}),o.map((function(n,t){return(0,Z.jsx)(Q,{className:e===n.name?"selected":"",theme:r,onClick:function(e){return l(0,n.name)},children:n.name},t)}))]})},G=f.ZP.div(D||(D=(0,d.Z)(["\n  position: relative;\n  top: 70px;\n  overflow-x: scroll;\n  width: 100%;\n  padding: 1rem 2rem;\n  padding-top: 30px;\n  color: red;\n  display: flex;\n  background: ",";\n"])),(function(n){return n.theme.primary})),Q=f.ZP.div(H||(H=(0,d.Z)(["\n  padding: 10px 15px;\n  border: dotted "," 1px;\n  margin: 0 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease-in-out;\n  display: flex;\n  align-items: center;\n  color: ",";\n  background: ",";\n\n  img {\n    width: 15px;\n    height: 15px;\n    margin: 0 5px;\n  }\n\n  &:hover {\n    opacity: 0.5;\n  }\n\n  &.selected {\n    background: ",";\n    color: ",";\n  }\n"])),(function(n){return n.theme.contrast}),(function(n){return n.theme.contrast}),(function(n){return n.theme.primary}),(function(n){return n.theme.secondary}),(function(n){return n.theme.primary}));var V=function(){var n=(0,v.I0)(),e=(0,s.useState)([]),t=(0,u.Z)(e,2),r=t[0],i=t[1],a=(0,s.useState)(!0),o=(0,u.Z)(a,2),c=o[0],d=o[1],p=(0,s.useState)(!1),f=(0,u.Z)(p,2),m=f[0],g=f[1],b=(0,s.useState)("\u0627\u0644\u0643\u0644"),y=(0,u.Z)(b,2),k=y[0],S=y[1],N=(0,v.v9)(F.Pu);return(0,s.useEffect)((function(){return(0,j.Z)(w().mark((function e(){var t,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,fetch("/api/dashboard/products/".concat(k));case 4:return t=e.sent,e.next=7,t.json();case 7:r=e.sent,i(r),n((0,X.yK)(r)),d(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g("ops Some thing went wrong try to reload the page");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))(),function(){i([])}}),[k]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)($,{selectedCategory:k,setCategory:S}),(0,Z.jsx)(Y,{theme:N,children:m?(0,Z.jsx)(x.Z,{msg:m}):c?(0,Z.jsx)(h.Z,{}):(0,Z.jsxs)(nn,{children:[r.length?null:(0,Z.jsx)("h1",{children:" No Products Found "}),r.map((function(n,e){return(0,s.createElement)(K,(0,l.Z)((0,l.Z)({},n),{},{product:(0,l.Z)({},n),key:e}))}))]})})]})},Y=f.ZP.div(L||(L=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  overflow-x: hidden;\n  position: relative;\n  min-height: 100vh;\n  top: 70px;\n  background: ",";\n"])),(function(n){return n.theme.primary})),nn=f.ZP.div(q||(q=(0,d.Z)(["\n  margin: 1rem 0;\n  width: 100%;\n  justify-content: center;\n  padding: 0 1em;\n  display: flex;\n  flex-wrap: wrap;\n"]))),en=function(){return(0,Z.jsxs)(c.Z5,{children:[(0,Z.jsx)(c.AW,{path:"/:id",element:(0,Z.jsx)(R,{})}),(0,Z.jsx)(c.AW,{path:"/",index:!0,element:(0,Z.jsx)(V,{})})]})}}}]);
//# sourceMappingURL=976.fe78a193.chunk.js.map