{"version":3,"file":"static/js/976.fe78a193.chunk.js","mappings":"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","sources":["hooks/useFetch.js","components/Rating.js","components/ProductDetails.js","components/ViewableRating.js","components/ProductCard.js","components/catagories.js","components/Products.js","components/ProductsRoutesWarper.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nconst useFetch = (url, callBack) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(url)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setData(data);\r\n        callBack(data);\r\n        setError(null);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setError(err);\r\n        setLoading(false);\r\n      });\r\n  }, [url]);\r\n  return { data, loading, error };\r\n};\r\n\r\nexport default useFetch;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getUser } from \"../features/userSlice\";\r\nimport useFetch from \"../hooks/useFetch\";\r\n\r\nconst filledStartStyle = {\r\n  color: \"#ffc107\",\r\n  cursor: \"pointer\",\r\n};\r\n\r\nconst normalStartStyle = {\r\n  color: \"#000\",\r\n  cursor: \"pointer\",\r\n};\r\n\r\nconst Rating = ({ rating, setRating, id }) => {\r\n  const initialRating = useRef(rating);\r\n  const user = useSelector(getUser);\r\n\r\n  // check if the user rated the product before\r\n  const [voteStatus, setVoteStatus] = useState({});\r\n\r\n  const response = useFetch(\r\n    `/api/dashboard/check-vote/${user?._id}/${id}`,\r\n    (data) => {\r\n      console.log(data);\r\n      setVoteStatus(data);\r\n    }\r\n  );\r\n  // view only mode\r\n\r\n  const handleRating = (index) => {\r\n    if (!voteStatus.success) return;\r\n    const copy = { ...rating };\r\n    copy.rate = index;\r\n    copy.numberOfReviews += 1;\r\n    setRating(copy);\r\n    initialRating.current = copy;\r\n    fetch(`/api/dashboard/rate-product/${id}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ user_id: user._id, rate: rating.rate }),\r\n    })\r\n      .then(async (res) => {\r\n        const response = await res.json();\r\n        if (response.success)\r\n          setVoteStatus({ success: false, message: response.message });\r\n        if (!response.success) {\r\n          setVoteStatus(response);\r\n          setRating(initialRating.current);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setVoteStatus(\"vote Failed check your connection\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n      <div>\r\n        {Array(5)\r\n          .fill(0)\r\n          .map((_, i) => i + 1)\r\n          .map((idx) => {\r\n            return (\r\n              <span\r\n                key={idx}\r\n                style={idx > rating.rate ? normalStartStyle : filledStartStyle}\r\n                onClick={() => handleRating(idx)}\r\n                onMouseEnter={() => {\r\n                  if (!voteStatus.success) return;\r\n                  const copy = { ...rating };\r\n                  copy.rate = idx;\r\n                  setRating(copy);\r\n                }}\r\n                onMouseLeave={() => setRating(initialRating.current)}\r\n              >\r\n                &#9733;\r\n              </span>\r\n            );\r\n          })}\r\n      </div>\r\n      <span\r\n        style={{ margin: \"0 15px\", fontSize: \"0.8rem\", fontWeight: \"bold\" }}\r\n      >\r\n        ( {rating.numberOfReviews} Reviews )\r\n      </span>\r\n\r\n      <span style={{ margin: \"0 15px\", fontSize: \"0.8rem\" }}>\r\n        {\" \"}\r\n        {voteStatus.message}{\" \"}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rating;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport useFetch from \"../hooks/useFetch\";\r\nimport styled from \"styled-components\";\r\nimport LoadingScreen from \"./LoadingScreen\";\r\nimport ErrorPage from \"./ErrorPage\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { add, getCart } from \"../features/cartSlice\";\r\nimport { Buffer } from \"buffer\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Rating from \"./Rating\";\r\n\r\nfunction ProductDetails() {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const [inCart, setInCart] = useState(false);\r\n  const [rating, setRating] = useState({ rate: 0, numberOfReviews: 0 });\r\n  let cartItems = useSelector(getCart);\r\n  const { data, loading, error } = useFetch(\r\n    `/api/dashboard/product/${id}`,\r\n    (product) => {\r\n      setInCart(checkProduct());\r\n\r\n      console.log(product.rates);\r\n      // when no rate available\r\n      if (!product.rates.length) return;\r\n\r\n      const total = product.rates.reduce((sum, rateObj) => {\r\n        return sum + rateObj.rating;\r\n      }, 0);\r\n      const rating = Math.round(total / product.rates.length);\r\n      setRating({ rate: rating, numberOfReviews: product.rates.length });\r\n    }\r\n  );\r\n  const product = data;\r\n\r\n  console.log(id, data);\r\n  function addToCart() {\r\n    console.log(product);\r\n    dispatch(add({ ...product }));\r\n    setInCart(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  function checkProduct() {\r\n    const productInCart = cartItems.find((item) => item.id === id);\r\n    if (productInCart !== undefined) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  } else if (loading) {\r\n    return <LoadingScreen />;\r\n  } else {\r\n    let buff = Buffer.from(product.image.data.data);\r\n    let base64Image = buff.toString(\"base64\");\r\n    return (\r\n      <Container>\r\n        <LeftContainer>\r\n          <img\r\n            src={`data:${product.image.contentType};base64,${base64Image}`}\r\n            alt={product.title}\r\n          />\r\n        </LeftContainer>\r\n        <RightContainer>\r\n          <div>\r\n            <h1> {product.title} </h1>\r\n            <p className=\"desc\">{product.description}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"title\"> Price </p>\r\n            <span>\r\n              {\" \"}\r\n              <strong>{product.price} $</strong>{\" \"}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            {\" \"}\r\n            <p className=\"title\"> Color </p>\r\n            <span> {product.color} </span>\r\n          </div>\r\n          <div>\r\n            {\" \"}\r\n            <p className=\"title\"> catagories </p>\r\n            <span> {product.label || \" \"} </span>\r\n          </div>\r\n          <div>\r\n            {\" \"}\r\n            <p className=\"title\"> Rating </p>\r\n            <Rating rating={rating} id={id} setRating={setRating} />\r\n          </div>\r\n          <ButtonsWarper>\r\n            <button disabled={inCart} onClick={addToCart}>\r\n              {inCart ? \"in Cart\" : \"Add to Cart\"}\r\n            </button>\r\n          </ButtonsWarper>\r\n        </RightContainer>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductDetails;\r\nconst Container = styled.div`\r\n  @media screen and (max-width: 600px) {\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    div {\r\n      width: 100%;\r\n      padding: 0;\r\n      margin: 1rem 0;\r\n    }\r\n  }\r\n  padding: 5rem 3rem;\r\n  display: flex;\r\n  width: 100vw;\r\n`;\r\n\r\nconst RightContainer = styled.div`\r\n  padding: 0 2rem;\r\n  width: 50%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  & > * {\r\n    margin: 0 0 1rem 0;\r\n\r\n    p {\r\n      margin: 10px 0;\r\n    }\r\n  }\r\n\r\n  & > div > .title {\r\n    font-weight: bold;\r\n    font-size: 1.2rem;\r\n  }\r\n`;\r\n\r\nconst LeftContainer = styled.div`\r\n  width: 50%;\r\n  padding: 0 3rem;\r\n  img {\r\n    width: 100%;\r\n    height: 60vh;\r\n  }\r\n`;\r\n\r\nconst ButtonsWarper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  button {\r\n    padding: 10px 20px;\r\n    cursor: pointer;\r\n    background: #c0770a;\r\n    color: white;\r\n    border: none;\r\n  }\r\n\r\n  button:hover {\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n","import React from \"react\";\r\n\r\nconst filledStarStyle = {\r\n  color: \"#ffc107\",\r\n};\r\n\r\nconst normalStarStyle = {\r\n  color: \"#000\",\r\n};\r\n\r\nconst ViewableRating = ({ rating }) => {\r\n  return (\r\n    <div style={{ display: \"flex\", position: \"relative\", top: \"-8px\" }}>\r\n      <div style={{ fontSize: \"0.8rem\" }}>\r\n        {[...Array(5)].map((_, index) => {\r\n          return (\r\n            <span\r\n              key={index}\r\n              style={index < rating.rate ? filledStarStyle : normalStarStyle}\r\n            >\r\n              &#9733;\r\n            </span>\r\n          );\r\n        })}\r\n      </div>\r\n      <div style={{ fontSize: \"0.8rem\", marginLeft: 3 }}>\r\n        ({rating.numberOfReviews}\r\n        {rating.numberOfReviews > 1 ? \" reviews\" : \" review\"})\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewableRating;\r\n","import React, { useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { add, getCart, remove } from \"../features/cartSlice\";\r\nimport { selectTheme } from \"../features/appSlice\";\r\nimport { Buffer } from \"buffer\";\r\nimport ViewableRating from \"./ViewableRating\";\r\n\r\nconst CustomBadge = styled.div`\r\n  background-color: #f00;\r\n  color: #fff;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  box-shadow: 1px 1px 16px 6px rgb(233 249 0);\r\n  height: 30px;\r\n  transform: rotate(-45deg) translate(-20%, 0);\r\n`;\r\nconst OfferBadge = ({ offer }) => {\r\n  return (\r\n    <CustomBadge>\r\n      <span>{offer.percent}% OFF</span>\r\n    </CustomBadge>\r\n  );\r\n};\r\n\r\nconst Price = ({ price, offer }) => {\r\n  if (offer?.available) {\r\n    const newPrice = Math.round((price - price * (offer.percent / 100)) * 100) / 100;\r\n    return (\r\n      <div className=\"price\">\r\n        <span\r\n          className=\"oldPrice\"\r\n          style={{\r\n            margin: \"0 10px\",\r\n            color: \"gray\",\r\n            fontWeight: \"400\",\r\n          }}\r\n        >\r\n          <del> {price} </del>\r\n        </span>\r\n        <span className=\"newPrice\" style={{ color: \"green\" }}>\r\n          {newPrice} AED\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <div className=\"price\">{price} AED</div>;\r\n};\r\n\r\nfunction ProductCard({\r\n  image,\r\n  title,\r\n  price,\r\n  description,\r\n  _id,\r\n  product,\r\n  rates,\r\n  offer,\r\n}) {\r\n  // image rendering\r\n  let buff = Buffer.from(image.data.data, \"base64\");\r\n\r\n  let base64Image = buff.toString(\"base64\");\r\n\r\n  let theme = useSelector(selectTheme);\r\n  let navigate = useNavigate();\r\n  let dispatch = useDispatch();\r\n  let cartItems = useSelector(getCart);\r\n  let inCart = cartItems.filter((item) => item._id === _id);\r\n  function addToCart() {\r\n    let newPrice = price\r\n    if(offer?.available) {\r\n      newPrice = Math.round((price - price * (offer.percent / 100)) * 100) / 100;\r\n    } \r\n    dispatch(add({ ...product, price: newPrice }));\r\n  }\r\n\r\n  function removeFromCart() {\r\n    dispatch(remove(_id));\r\n  }\r\n\r\n  const getRating = () => {\r\n    const numberOfReviews = rates.length;\r\n    const totalRates = rates.reduce((sum, rate) => (sum += rate.rating), 0); // sum of all rates\r\n    if (numberOfReviews === 0) return { rate: 0, numberOfReviews: 0 };\r\n    return {\r\n      rate: Math.round(totalRates / numberOfReviews) || 0,\r\n      numberOfReviews,\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  return (\r\n    <Container theme={theme}>\r\n      {offer?.available && <OfferBadge offer={offer} />}\r\n      <img\r\n        src={`data:${image.contentType};base64,${base64Image}`}\r\n        onClick={() => navigate(`/products/${_id}`)}\r\n        alt={title}\r\n      />\r\n      <h4> {title.length > 20 ? title.substr(0, 20) + \" ...\" : title} </h4>\r\n      <p>{description.substr(0, 50)}</p>\r\n      <ViewableRating rating={getRating()} />\r\n      <div className=\"desc\">\r\n        {inCart.length ? (\r\n          <button className=\"removeFromCartBtn\" onClick={removeFromCart}>\r\n            <span className=\"badge\">{inCart[0].quantity}</span>X\r\n          </button>\r\n        ) : (\r\n          <button onClick={addToCart}>add to cart</button>\r\n        )}\r\n        <Price price={price} offer={offer} />\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ProductCard;\r\nconst Container = styled.div`\r\n  @media screen and (max-width: 600px) {\r\n    width: 70%;\r\n  }\r\n\r\n  @media screen and (max-width: 900px) and (min-width: 600px) {\r\n    width: 35%;\r\n    margin: 1rem;\r\n  }\r\n\r\n  position: relative;\r\n  background: #fff;\r\n  min-width: 150px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 19%;\r\n  margin: 3rem 2rem;\r\n  height: 340px;\r\n  box-shadow: 5px 10px 20px rgb(0 0 0 / 30%);\r\n  padding: 5px 0 0 0;\r\n  img {\r\n    width: 100%;\r\n    height: 170px;\r\n    cursor: pointer;\r\n    margin: 0 15px 5px 15px;\r\n  }\r\n\r\n  h4 {\r\n    padding: 9px 0;\r\n    letter-spacing: 0.5px;\r\n  }\r\n\r\n  p {\r\n    min-width: 250px;\r\n    padding: 0 20px;\r\n    margin: 0 0 0.1rem 0;\r\n    font-size: 0.7rem;\r\n    font-family: Roboto, serif;\r\n    text-align: center;\r\n    flex: 1;\r\n  }\r\n\r\n  .desc {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column-reverse;\r\n    transition: 0.25s;\r\n    word-wrap: break-word;\r\n    position: relative;\r\n    bottom: 0px;\r\n    text-align: center;\r\n    min-height: 50px;\r\n\r\n    .removeFromCartBtn {\r\n      padding: 0 5px 0 0;\r\n      font-weight: bold;\r\n      background: ${({ theme }) => theme.action};\r\n      color: ${({ theme }) => theme.primary};\r\n      border: solid 1px ${({ theme }) => theme.action};\r\n      height: 50px;\r\n      .badge {\r\n        background: #fff;\r\n        color: black;\r\n        padding: 2px 7px;\r\n        margin: 1px 10px 1px 1px;\r\n        border-radius: 50%;\r\n        cursor: pointer;\r\n        transition: 0.25s;\r\n      }\r\n\r\n      &:hover {\r\n        .badge {\r\n          background: white;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .desc > button {\r\n    background: ${({ theme }) => theme.action};\r\n    padding: 10px 0;\r\n    border: solid 1px ${({ theme }) => theme.action};\r\n    cursor: pointer;\r\n    transition: 0.25s;\r\n    color: #fff;\r\n    font-weight: bold;\r\n    margin-top: 0.5rem;\r\n\r\n    &:hover {\r\n      transform: scale(1.05);\r\n      background: ${({ theme }) => theme.action};\r\n      border-color: ${({ theme }) => theme.action};\r\n      color: white;\r\n    }\r\n  }\r\n\r\n  .desc > span {\r\n    font-weight: 900;\r\n  }\r\n`;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { selectTheme } from \"../features/appSlice\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Catagories = ({ selectedCategory, setCategory }) => {\r\n  const theme = useSelector(selectTheme);\r\n  const [allCatagories, setAllCatagories] = useState([]);\r\n  const catagoriesContainer = React.useRef();\r\n\r\n  const handleSetCategory = (e, categoryName) => {\r\n    setCategory(categoryName);\r\n    console.log(selectedCategory);\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function getCatagories() {\r\n      try {\r\n        let response = await fetch(\"/api/settings/\");\r\n        let settings = await response.json();\r\n        const settingsData = await settings[0];\r\n        setAllCatagories(settingsData.catagories);\r\n        console.log(settingsData.catagories);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n    getCatagories();\r\n  }, []);\r\n  return (\r\n    <Container className=\"no-scroll\" theme={theme} ref={catagoriesContainer}>\r\n      <Category\r\n        className={selectedCategory === \"الكل\" ? \"selected\" : \"\"}\r\n        theme={theme}\r\n        onClick={(e) => handleSetCategory(e, \"الكل\")}\r\n      >\r\n        الكل\r\n      </Category>\r\n      {allCatagories.map((category, index) => {\r\n        return (\r\n          <Category\r\n            className={selectedCategory === category.name ? \"selected\" : \"\"}\r\n            theme={theme}\r\n            key={index}\r\n            onClick={(e) => handleSetCategory(e, category.name)}\r\n          >\r\n            {category.name}\r\n          </Category>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Catagories;\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  top: 70px;\r\n  overflow-x: scroll;\r\n  width: 100%;\r\n  padding: 1rem 2rem;\r\n  padding-top: 30px;\r\n  color: red;\r\n  display: flex;\r\n  background: ${({ theme }) => theme.primary};\r\n`;\r\n\r\nconst Category = styled.div`\r\n  padding: 10px 15px;\r\n  border: dotted ${({ theme }) => theme.contrast} 1px;\r\n  margin: 0 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease-in-out;\r\n  display: flex;\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.contrast};\r\n  background: ${({ theme }) => theme.primary};\r\n\r\n  img {\r\n    width: 15px;\r\n    height: 15px;\r\n    margin: 0 5px;\r\n  }\r\n\r\n  &:hover {\r\n    opacity: 0.5;\r\n  }\r\n\r\n  &.selected {\r\n    background: ${({ theme }) => theme.secondary};\r\n    color: ${({ theme }) => theme.primary};\r\n  }\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addProducts } from \"../features/productsSlice\";\r\nimport { selectTheme } from \"../features/appSlice\";\r\nimport ErrorPage from \"./ErrorPage\";\r\nimport LoadingScreen from \"./LoadingScreen\";\r\nimport Catagories from \"./catagories\";\r\n\r\nfunction Products() {\r\n  let dispatch = useDispatch();\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [category, setCategory] = useState(\"الكل\");\r\n  const theme = useSelector(selectTheme);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      try {\r\n        setLoading(true);\r\n        let response = await fetch(`/api/dashboard/products/${category}`);\r\n        let productsList = await response.json();\r\n        setProducts(productsList);\r\n        dispatch(addProducts(productsList));\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError(\"ops Some thing went wrong try to reload the page\");\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      setProducts([]);\r\n    };\r\n  }, [category]);\r\n  return (\r\n    <>\r\n      <Catagories selectedCategory={category} setCategory={setCategory} />\r\n      <Container theme={theme}>\r\n        {!error ? (\r\n          loading ? (\r\n            <LoadingScreen />\r\n          ) : (\r\n            <ProductsContainer>\r\n              {!products.length ? <h1> No Products Found </h1> : null}\r\n              {products.map((product, index) => {\r\n                return (\r\n                  <ProductCard\r\n                    {...product}\r\n                    product={{ ...product }}\r\n                    key={index}\r\n                  />\r\n                );\r\n              })}\r\n            </ProductsContainer>\r\n          )\r\n        ) : (\r\n          <ErrorPage msg={error} />\r\n        )}\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-x: hidden;\r\n  position: relative;\r\n  min-height: 100vh;\r\n  top: 70px;\r\n  background: ${({ theme }) => theme.primary};\r\n`;\r\n\r\nconst ProductsContainer = styled.div`\r\n  margin: 1rem 0;\r\n  width: 100%;\r\n  justify-content: center;\r\n  padding: 0 1em;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n","import React from \"react\";\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport ProductDetails from \"./ProductDetails\";\r\nimport Products from \"./Products\";\r\nconst ProductsRoutesWarper = () => {\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/:id\" element={<ProductDetails />} />\r\n      <Route path=\"/\" index element={<Products />} />\r\n    </Routes>\r\n  );\r\n};\r\n\r\nexport default ProductsRoutesWarper;\r\n"],"names":["url","callBack","useState","loading","setLoading","data","setData","error","setError","useEffect","fetch","then","response","json","catch","err","filledStartStyle","color","cursor","normalStartStyle","rating","setRating","id","initialRating","useRef","user","useSelector","getUser","voteStatus","setVoteStatus","useFetch","_id","console","log","style","display","alignItems","Array","fill","map","_","i","idx","rate","onClick","index","success","copy","numberOfReviews","current","method","headers","body","JSON","stringify","user_id","res","message","handleRating","onMouseEnter","onMouseLeave","margin","fontSize","fontWeight","useParams","dispatch","useDispatch","inCart","setInCart","cartItems","getCart","product","undefined","find","item","rates","length","total","reduce","sum","rateObj","Math","round","localStorage","setItem","ErrorPage","LoadingScreen","base64Image","Buffer","image","toString","Container","LeftContainer","src","contentType","alt","title","RightContainer","className","description","price","label","ButtonsWarper","disabled","add","styled","filledStarStyle","normalStarStyle","position","top","marginLeft","CustomBadge","OfferBadge","offer","percent","Price","available","newPrice","theme","selectTheme","navigate","useNavigate","filter","substr","totalRates","getRating","remove","quantity","action","primary","selectedCategory","setCategory","allCatagories","setAllCatagories","catagoriesContainer","React","handleSetCategory","e","categoryName","settings","settingsData","catagories","getCatagories","ref","Category","category","name","contrast","secondary","products","setProducts","productsList","addProducts","msg","ProductsContainer","key","path","element"],"sourceRoot":""}